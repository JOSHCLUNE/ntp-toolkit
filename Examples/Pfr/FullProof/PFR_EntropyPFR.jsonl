{"srcUpToDecl":"import PFR.TauFunctional\nimport PFR.HundredPercent\nimport PFR.Endgame\n\n/-!\n# Entropic version of polynomial Freiman-Ruzsa conjecture\n\nHere we prove the entropic version of the polynomial Freiman-Ruzsa conjecture.\n\n## Main results\n\n* `entropic_PFR_conjecture`: For two $G$-valued random variables $X^0_1, X^0_2$, there is some\n  subgroup $H \\leq G$ such that $d[X^0_1;U_H] + d[X^0_2;U_H] \\le 11 d[X^0_1;X^0_2]$.\n\n-/\n\nopen MeasureTheory ProbabilityTheory\nuniverse uG\n\nvariable {Ω₀₁ Ω₀₂ : Type*} [MeasureSpace Ω₀₁] [MeasureSpace Ω₀₂]\n\nvariable {Ω Ω' : Type*} [mΩ : MeasureSpace Ω] [IsProbabilityMeasure (ℙ : Measure Ω)]\n  [IsProbabilityMeasure (ℙ : Measure Ω₀₁)] [IsProbabilityMeasure (ℙ : Measure Ω₀₂)]\n\nvariable {G : Type uG} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G]\n  [MeasurableSingletonClass G]\nvariable (p : refPackage Ω₀₁ Ω₀₂ G) {X₁ : Ω → G} {X₂ : Ω → G} (hX₁ : Measurable X₁) (hX₂ : Measurable X₂)\n\n","proof":":= by\n  let ⟨A, mA, μ, Y₁, Y₂, Y₁', Y₂', hμ, h_indep, hY₁, hY₂, hY₁', hY₂', h_id1, h_id2, h_id1', h_id2'⟩\n    := independent_copies4_nondep hX₁ hX₂ hX₁ hX₂ ℙ ℙ ℙ ℙ\n  rw [← h_id1.rdist_eq h_id2]\n  letI : MeasureSpace A := ⟨μ⟩\n  have : IsProbabilityMeasure (ℙ : Measure A) := hμ\n  rw [← h_id1.tau_minimizes p h_id2] at h_min\n  apply tau_strictly_decreases_aux p Y₁ Y₂ Y₁' Y₂' hY₁ hY₂ hY₁' hY₂' (h_id1.trans h_id1'.symm)\n    (h_id2.trans h_id2'.symm) h_indep h_min hpη","declId":"PFR.EntropyPFR.29_0.S8o63zl7SFl76ig","decl":"/-- If $d[X_1;X_2] > 0$ then there are $G$-valued random variables $X'_1, X'_2$ such that $\\tau[X'_1;X'_2] < \\tau[X_1;X_2]$.\nPhrased in the contrapositive form for convenience of proof. -/\ntheorem tau_strictly_decreases (h_min : tau_minimizes p X₁ X₂) (hpη: p.η = 1/9): d[X₁ # X₂] = 0 "}
{"srcUpToDecl":"import PFR.TauFunctional\nimport PFR.HundredPercent\nimport PFR.Endgame\n\n/-!\n# Entropic version of polynomial Freiman-Ruzsa conjecture\n\nHere we prove the entropic version of the polynomial Freiman-Ruzsa conjecture.\n\n## Main results\n\n* `entropic_PFR_conjecture`: For two $G$-valued random variables $X^0_1, X^0_2$, there is some\n  subgroup $H \\leq G$ such that $d[X^0_1;U_H] + d[X^0_2;U_H] \\le 11 d[X^0_1;X^0_2]$.\n\n-/\n\nopen MeasureTheory ProbabilityTheory\nuniverse uG\n\nvariable {Ω₀₁ Ω₀₂ : Type*} [MeasureSpace Ω₀₁] [MeasureSpace Ω₀₂]\n\nvariable {Ω Ω' : Type*} [mΩ : MeasureSpace Ω] [IsProbabilityMeasure (ℙ : Measure Ω)]\n  [IsProbabilityMeasure (ℙ : Measure Ω₀₁)] [IsProbabilityMeasure (ℙ : Measure Ω₀₂)]\n\nvariable {G : Type uG} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G]\n  [MeasurableSingletonClass G]\nvariable (p : refPackage Ω₀₁ Ω₀₂ G) {X₁ : Ω → G} {X₂ : Ω → G} (hX₁ : Measurable X₁) (hX₂ : Measurable X₂)\n\n/-- If $d[X_1;X_2] > 0$ then there are $G$-valued random variables $X'_1, X'_2$ such that $\\tau[X'_1;X'_2] < \\tau[X_1;X_2]$.\nPhrased in the contrapositive form for convenience of proof. -/\ntheorem tau_strictly_decreases (h_min : tau_minimizes p X₁ X₂) (hpη: p.η = 1/9): d[X₁ # X₂] = 0 := by\n  let ⟨A, mA, μ, Y₁, Y₂, Y₁', Y₂', hμ, h_indep, hY₁, hY₂, hY₁', hY₂', h_id1, h_id2, h_id1', h_id2'⟩\n    := independent_copies4_nondep hX₁ hX₂ hX₁ hX₂ ℙ ℙ ℙ ℙ\n  rw [← h_id1.rdist_eq h_id2]\n  letI : MeasureSpace A := ⟨μ⟩\n  have : IsProbabilityMeasure (ℙ : Measure A) := hμ\n  rw [← h_id1.tau_minimizes p h_id2] at h_min\n  apply tau_strictly_decreases_aux p Y₁ Y₂ Y₁' Y₂' hY₁ hY₂ hY₁' hY₂' (h_id1.trans h_id1'.symm)\n    (h_id2.trans h_id2'.symm) h_indep h_min hpη\n\n\n","proof":":= by\n  obtain ⟨Ω', mΩ', X₁, X₂, hX₁, hX₂, _, htau_min⟩ := tau_minimizer_exists p\n  have hdist : d[X₁ # X₂] = 0 := tau_strictly_decreases p hX₁ hX₂ htau_min hpη\n  obtain ⟨H, U, hU, hH_unif, hdistX₁, hdistX₂⟩ := exists_isUniform_of_rdist_eq_zero hX₁ hX₂ hdist\n  refine ⟨H, Ω', inferInstance, U, inferInstance, hU, hH_unif , ?_⟩\n  have h : τ[X₁ # X₂ | p] ≤ τ[p.X₀₂ # p.X₀₁ | p] := is_tau_min p htau_min p.hmeas2 p.hmeas1\n  rw [tau, tau, hpη] at h\n  norm_num at h\n  have : d[p.X₀₁ # p.X₀₂] = d[p.X₀₂ # p.X₀₁] := rdist_symm\n  have : d[p.X₀₁ # U] ≤ d[p.X₀₁ # X₁] + d[X₁ # U] := rdist_triangle p.hmeas1 hX₁ hU\n  have : d[p.X₀₂ # U] ≤ d[p.X₀₂ # X₂] + d[X₂ # U] := rdist_triangle p.hmeas2 hX₂ hU\n  linarith","declId":"PFR.EntropyPFR.42_0.S8o63zl7SFl76ig","decl":"/-- `entropic_PFR_conjecture`: For two $G$-valued random variables $X^0_1, X^0_2$, there is some\n    subgroup $H \\leq G$ such that $d[X^0_1;U_H] + d[X^0_2;U_H] \\le 11 d[X^0_1;X^0_2]$. -/\ntheorem entropic_PFR_conjecture (hpη : p.η = 1/9):\n    ∃ H : AddSubgroup G, ∃ Ω : Type uG, ∃ mΩ : MeasureSpace Ω, ∃ U : Ω → G,\n    IsProbabilityMeasure (ℙ : Measure Ω) ∧ Measurable U ∧\n    IsUniform H U ∧ d[p.X₀₁ # U] + d[p.X₀₂ # U] ≤ 11 * d[p.X₀₁ # p.X₀₂] "}
{"srcUpToDecl":"import PFR.TauFunctional\nimport PFR.HundredPercent\nimport PFR.Endgame\n\n/-!\n# Entropic version of polynomial Freiman-Ruzsa conjecture\n\nHere we prove the entropic version of the polynomial Freiman-Ruzsa conjecture.\n\n## Main results\n\n* `entropic_PFR_conjecture`: For two $G$-valued random variables $X^0_1, X^0_2$, there is some\n  subgroup $H \\leq G$ such that $d[X^0_1;U_H] + d[X^0_2;U_H] \\le 11 d[X^0_1;X^0_2]$.\n\n-/\n\nopen MeasureTheory ProbabilityTheory\nuniverse uG\n\nvariable {Ω₀₁ Ω₀₂ : Type*} [MeasureSpace Ω₀₁] [MeasureSpace Ω₀₂]\n\nvariable {Ω Ω' : Type*} [mΩ : MeasureSpace Ω] [IsProbabilityMeasure (ℙ : Measure Ω)]\n  [IsProbabilityMeasure (ℙ : Measure Ω₀₁)] [IsProbabilityMeasure (ℙ : Measure Ω₀₂)]\n\nvariable {G : Type uG} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G]\n  [MeasurableSingletonClass G]\nvariable (p : refPackage Ω₀₁ Ω₀₂ G) {X₁ : Ω → G} {X₂ : Ω → G} (hX₁ : Measurable X₁) (hX₂ : Measurable X₂)\n\n/-- If $d[X_1;X_2] > 0$ then there are $G$-valued random variables $X'_1, X'_2$ such that $\\tau[X'_1;X'_2] < \\tau[X_1;X_2]$.\nPhrased in the contrapositive form for convenience of proof. -/\ntheorem tau_strictly_decreases (h_min : tau_minimizes p X₁ X₂) (hpη: p.η = 1/9): d[X₁ # X₂] = 0 := by\n  let ⟨A, mA, μ, Y₁, Y₂, Y₁', Y₂', hμ, h_indep, hY₁, hY₂, hY₁', hY₂', h_id1, h_id2, h_id1', h_id2'⟩\n    := independent_copies4_nondep hX₁ hX₂ hX₁ hX₂ ℙ ℙ ℙ ℙ\n  rw [← h_id1.rdist_eq h_id2]\n  letI : MeasureSpace A := ⟨μ⟩\n  have : IsProbabilityMeasure (ℙ : Measure A) := hμ\n  rw [← h_id1.tau_minimizes p h_id2] at h_min\n  apply tau_strictly_decreases_aux p Y₁ Y₂ Y₁' Y₂' hY₁ hY₂ hY₁' hY₂' (h_id1.trans h_id1'.symm)\n    (h_id2.trans h_id2'.symm) h_indep h_min hpη\n\n\n/-- `entropic_PFR_conjecture`: For two $G$-valued random variables $X^0_1, X^0_2$, there is some\n    subgroup $H \\leq G$ such that $d[X^0_1;U_H] + d[X^0_2;U_H] \\le 11 d[X^0_1;X^0_2]$. -/\ntheorem entropic_PFR_conjecture (hpη : p.η = 1/9):\n    ∃ H : AddSubgroup G, ∃ Ω : Type uG, ∃ mΩ : MeasureSpace Ω, ∃ U : Ω → G,\n    IsProbabilityMeasure (ℙ : Measure Ω) ∧ Measurable U ∧\n    IsUniform H U ∧ d[p.X₀₁ # U] + d[p.X₀₂ # U] ≤ 11 * d[p.X₀₁ # p.X₀₂] := by\n  obtain ⟨Ω', mΩ', X₁, X₂, hX₁, hX₂, _, htau_min⟩ := tau_minimizer_exists p\n  have hdist : d[X₁ # X₂] = 0 := tau_strictly_decreases p hX₁ hX₂ htau_min hpη\n  obtain ⟨H, U, hU, hH_unif, hdistX₁, hdistX₂⟩ := exists_isUniform_of_rdist_eq_zero hX₁ hX₂ hdist\n  refine ⟨H, Ω', inferInstance, U, inferInstance, hU, hH_unif , ?_⟩\n  have h : τ[X₁ # X₂ | p] ≤ τ[p.X₀₂ # p.X₀₁ | p] := is_tau_min p htau_min p.hmeas2 p.hmeas1\n  rw [tau, tau, hpη] at h\n  norm_num at h\n  have : d[p.X₀₁ # p.X₀₂] = d[p.X₀₂ # p.X₀₁] := rdist_symm\n  have : d[p.X₀₁ # U] ≤ d[p.X₀₁ # X₁] + d[X₁ # U] := rdist_triangle p.hmeas1 hX₁ hU\n  have : d[p.X₀₂ # U] ≤ d[p.X₀₂ # X₂] + d[X₂ # U] := rdist_triangle p.hmeas2 hX₂ hU\n  linarith\n\n","proof":":= by\n  have : d[p.X₀₁ # p.X₀₂] = d[p.X₀₂ # p.X₀₁] := rdist_symm\n  obtain ⟨H, Ω, mΩ, U, H', hU, hUnif, h'⟩ := entropic_PFR_conjecture p hpη\n  refine ⟨H, Ω, mΩ, U, hUnif, ?_⟩\n  have : d[p.X₀₁ # U] ≤ d[p.X₀₁ # p.X₀₂] + d[p.X₀₂ # U] := rdist_triangle p.hmeas1 p.hmeas2 hU\n  have : d[p.X₀₂ # U] ≤ d[p.X₀₂ # p.X₀₁] + d[p.X₀₁ # U] := rdist_triangle p.hmeas2 p.hmeas1 hU\n  constructor\n  · linarith\n  · linarith","declId":"PFR.EntropyPFR.60_0.S8o63zl7SFl76ig","decl":"theorem entropic_PFR_conjecture' (hpη : p.η = 1/9):\n    ∃ H : AddSubgroup G, ∃ Ω : Type uG, ∃ mΩ : MeasureSpace Ω, ∃ U : Ω → G,\n    IsUniform H U ∧ d[p.X₀₁ # U] ≤ 6 * d[p.X₀₁ # p.X₀₂] ∧\n      d[p.X₀₂ # U] ≤ 6 * d[p.X₀₁ # p.X₀₂] "}
